<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3. Isolate Mutations :: The Reactive Principles</title>
    <link rel="canonical" href="https://www.reactivepriciples.org/patterns/isolate-mutations.html">
    <link rel="prev" href="communicate-facts.html">
    <link rel="next" href="coordinate-dataflow.html">
    <meta name="generator" content="Antora 2.3.4">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../_/css/site.css"><script>var uiRootPath = '../_'</script>

<!-- OneTrust Cookies Consent Notice start for reactiveprinciples.org -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="8362ff95-70f5-4499-872f-b4c8d2dae909-test" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for reactiveprinciples.org -->
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NKW8QMN');</script>
<!-- End Google Tag Manager -->    <link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<div class="rp-branding">
  <h3 class="r-logo main-logo">The <span>Reactive</span> Principles</h3>
  <div class="search-bar">
    <input id="search-input" type="text" placeholder="Search The Reactive Principles">
  </div>
</div><div class="body">
<div class="nav-container" data-component="" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <a class="section-title grey" href="//www.reactiveprinciples.org">The&nbsp;<span>Reactive</span>&nbsp;Principles</a>
    <!--<h3 class="title"><a href="../index.html"></a></h3>-->
    <ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">About this Document</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../cloud-native/index.html">Design Principles for Cloud Native Applications</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../edge-native/index.html">Design Principles for Edge Native Applications</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../principles/index.html">The Reactive Principles</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../principles/stay-responsive.html">I. Stay Responsive</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../principles/accept-uncertainty.html">II. Accept Uncertainty</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../principles/embrace-failure.html">III. Embrace Failure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../principles/assert-autonomy.html">IV. Assert Autonomy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../principles/tailor-consistency.html">V. Tailor Consistency</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../principles/decouple-time.html">VI. Decouple Time</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../principles/decouple-space.html">VII. Decouple Space</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../principles/handle-dynamics.html">VIII. Handle Dynamics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">The Reactive Patterns</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="partition-state.html">1. Partition State</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="communicate-facts.html">2. Communicate Facts</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="isolate-mutations.html">3. Isolate Mutations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="coordinate-dataflow.html">4. Coordinate Dataflow</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="localize-state.html">5. Localize State</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="observe-communications.html">6. Observe Communications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../contributing.html">How to Contribute to this Document</a>
  </li>
</ul>
  </li>
</ul>
    <a class="download-as-pdf" href="/_attachments/the-reactive-principles-and-patterns.pdf"
      download="the-reactive-principles-and-patterns.pdf">
      DOWNLOAD AS PDF
      <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#445de9"><g><rect fill="none" height="24" width="24"/></g><g><path d="M18,15v3H6v-3H4v3c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-3H18z M17,11l-1.41-1.41L13,12.17V4h-2v8.17L8.41,9.59L7,11l5,5 L17,11z"/></g></svg>
    </a>
    <hr>
    <a class="section-title" style="display: inline;" href="https://www.reactivemanifesto.org/">The&nbsp;<span>Reactive</span>&nbsp;Manifesto</a>
    <a class="section-title" style="display: inline;" href="https://www.reactivemanifesto.org/" target="_blank">
      <img src="//www.reactiveprinciples.org/_/img/new-tab.svg" alt="new tab" width="14"></a>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title"></span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html"></a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<!--
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">The Reactive Patterns</a></li>
    <li><a href="isolate-mutations.html">3. Isolate Mutations</a></li>
  </ul>
</nav>

<div class="download-pdf">
	<a href="../_attachments/the-reactive-principles-and-patterns.pdf" download="the-reactive-principles-and-patterns.pdf">Download as PDF</a>
</div>
-->
</div>
  <div class="content">
<article class="doc">
<h1 class="page">3. Isolate Mutations</h1>
<div class="paragraph">
<p><em>Contain and isolate mutable state using bulkheads</em></p>
</div>
<div class="paragraph">
<p>When you have to use mutable state, don’t share it. Instead contain it together with the associated behavior, using isolated and partitioned compartments, separated by <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/bulkhead">“bulkheads”</a> <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/bulkhead" target="new tab"><span class="image"><img src="../_images/new-tab.svg" alt="new tab" width="14"></span></a> and thus adopting a <a href="https://en.wikipedia.org/wiki/Shared-nothing_architecture">shared-nothing architecture</a>. <a href="https://en.wikipedia.org/wiki/Shared-nothing_architecture" target="new tab"><span class="image"><img src="../_images/new-tab.svg" alt="new tab" width="14"></span></a> This contains failure, prevents it from propagating outside the failed component, limits its scope, and localizes it to make it easier to pinpoint and manage. It also avoids minor issues leading to “cascading failures” and taking down an entire system. For example, recall that validation errors are not failures but are part of the normal interaction protocol of your stateful component.</p>
</div>
<div class="paragraph">
<p>Bulkheads are most easily installed by having the compartments communicate using <a href="https://www.reactivemanifesto.org/glossary#Message-Driven">asynchronous messaging</a> <a href="https://www.reactivemanifesto.org/glossary#Message-Driven" target="new tab"><span class="image"><img src="../_images/new-tab.svg" alt="new tab" width="14"></span></a>, which introduces a protocol boundary between the components, isolating them in both <a href="../principles/decouple-time.html" class="page"><em>time</em></a> and <a href="../principles/decouple-space.html" class="page"><em>space</em></a>.  Asynchronous messaging also enables observing the fluctuating demands, avoiding flooding a bulkhead, and providing a unit of replication if needed.</p>
</div>
<div class="paragraph">
<p>Only use mutable state for local computations, within the <em>consistency boundary</em> of the bulkheaded component—a <em>unit of consistency</em> that provides a safe haven for mutations, completely unobservable by the rest of the world. When the component is done with the local processing and ready to tell the world about its results, then it creates an immutable value representing the result—a <em>fact</em>— and publishes it to the world.</p>
</div>
<div class="paragraph">
<p>The bulkheaded components should ideally use single-threaded execution to simplify the programming model and avoid concurrency-related problems such as deadlocks, race conditions, and corrupt data. For example, <a href="https://nodejs.org/">Node.js</a> <a href="https://nodejs.org/" target="new tab"><span class="image"><img src="../_images/new-tab.svg" alt="new tab" width="14"></span></a>, <a href="https://akka.io/">Akka</a> <a href="https://akka.io/" target="new tab"><span class="image"><img src="../_images/new-tab.svg" alt="new tab" width="14"></span></a>, <a href="https://lmax-exchange.github.io/disruptor/">Disruptor</a> <a href="https://lmax-exchange.github.io/disruptor/" target="new tab"><span class="image"><img src="../_images/new-tab.svg" alt="new tab" width="14"></span></a>, or implementation of the <a href="https://en.wikipedia.org/wiki/Reactor_pattern">Reactor</a> <a href="https://en.wikipedia.org/wiki/Reactor_pattern" target="new tab"><span class="image"><img src="../_images/new-tab.svg" alt="new tab" width="14"></span></a> Pattern and its variants offer this functionality.</p>
</div>
<div class="paragraph">
<p>In this model, others can rely on stable and immutable values for their reasoning, whereas each component can internally still safely benefit from the advantages of mutability (like the simplicity of coding and algorithmic efficiency), strong consistency (providing <a href="https://en.wikipedia.org/wiki/ACID">ACID</a> <a href="https://en.wikipedia.org/wiki/ACID" target="new tab"><span class="image"><img src="../_images/new-tab.svg" alt="new tab" width="14"></span></a> semantics), and reduced coordination and contention (through the <a href="https://mechanical-sympathy.blogspot.com/2011/09/single-writer-principle.html">Single Writer Principle</a> <a href="https://mechanical-sympathy.blogspot.com/2011/09/single-writer-principle.html" target="new tab"><span class="image"><img src="../_images/new-tab.svg" alt="new tab" width="14"></span></a>).</p>
</div>
<nav class="pagination">
  <span class="prev"><a href="communicate-facts.html">2. Communicate Facts</a></span>
  <span class="next"><a href="coordinate-dataflow.html">4. Coordinate Dataflow</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="On This Page"
  data-levels="2">
    <div class="toc-menu">
    </div>
</aside>  </div>
</main>
</div>
<footer class="footer">
  <div>
    <h3>Authors</h3>
    <p>Written by Jonas Bonér—with help (roughly in order of contribution level) from: Roland Kuhn, Ben Christensen,
      Peter Vlugter, Josh Long, Sergey Bykov, Ben Hindman, Vaughn Vernon, Clement Escoffier, James Roper, Michael
      Behrendt, Kresten Krab Thorup, Colin Breck, Allard Buijze, Derek Collison, Viktor Klang, Ben Hale, Steve Gury,
      Tyler Jewell, James Ward, Stephan Ewen, and Ryland Degnan.</p>
  </div>
  <hr>
  <div>
    <p class="companion">
      <a class="r-logo white" href="//www.reactiveprinciples.org">The <span>Reactive</span> Principles</a> <em>a
        companion to</em> <a class="r-logo white" href="https://www.reactivemanifesto.org/">The
        <span>Reactive</span> Manifesto</a>
    </p>
  </div>
  <div class="legal-footer">
    <a href="https://www.reactivemanifesto.org/privacy" target="_blank">Privacy Policy</a>
    |
    <a href="/cookie.html">Cookie Policy</a>
    |
    <a id="ot-sdk-btn" class="ot-sdk-show-settings">Cookie Settings</a>
  </div>
</footer><script>
  window.antora = window.antora || {}
  window.antora.basePath = '..'
  window.antora.pagePath = '/patterns/isolate-mutations.html'
</script>

<script src="../_/js/site.js"></script>

<script src="../_/js/vendor/lunr.js"></script>
<script src="../_/js/vendor/search.js"></script>
<script async src="../search-index.js"></script>

<script async src="../_/js/vendor/highlight.js"></script>


<!--TODO ADD NEW GOOGLE TAG MANAGER-->  </body>
</html>
